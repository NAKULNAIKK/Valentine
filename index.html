<script>

let noCount = 0;
let songStarted = false;

let noBtn = document.getElementById("noBtn");
let yesBtn = document.getElementById("yesBtn");
let container = document.getElementById("photoContainer");
let song = document.getElementById("song");

const photos = [
"photo1.jpg.jpeg",
"photo2.jpg.jpeg",
"photo3.jpg.jpeg",
"photo4.jpg.jpeg",
"photo5.jpg.jpeg"
];

function startSong(){
  if(!songStarted){
    song.play().catch(()=>{});
    songStarted = true;
  }
}

function moveNoButton(){

  let yesRect = yesBtn.getBoundingClientRect();

  let offsetX = (Math.random()*160)-80;
  let offsetY = (Math.random()*160)-80;

  let newX = yesRect.left + offsetX;
  let newY = yesRect.top + offsetY;

  newX = Math.max(0, Math.min(window.innerWidth - noBtn.offsetWidth, newX));
  newY = Math.max(0, Math.min(window.innerHeight - noBtn.offsetHeight, newY));

  noBtn.style.left = newX + "px";
  noBtn.style.top = newY + "px";
}

function createHearts(){

  setInterval(()=>{

    let heart = document.createElement("div");

    heart.innerHTML = "‚ù§Ô∏è";
    heart.style.position = "fixed";
    heart.style.left = Math.random()*100 + "vw";
    heart.style.bottom = "0";
    heart.style.fontSize = "20px";
    heart.style.animation = "float 4s linear";

    document.body.appendChild(heart);

    setTimeout(()=>heart.remove(),4000);

  },300);
}

noBtn.onclick = () => {

  startSong();

  noCount++;

  noBtn.innerText = "üòÇ";

  setTimeout(()=> noBtn.innerText="No",1000);

  moveNoButton();

  if(noCount <= 5){
    container.innerHTML = "";
    let img = document.createElement("img");
    img.src = photos[noCount-1];
    container.appendChild(img);
  }
};

yesBtn.onclick = () => {

  startSong();

  noBtn.style.display = "none";

  createHearts();

  container.innerHTML = `
  <h2 id="loveMsg"></h2>
  `;

  let text = "You just made Nakul the happiest person alive ‚ù§Ô∏èü•∫";
  let i = 0;

  let typing = setInterval(()=>{

    document.getElementById("loveMsg").innerHTML += text[i];
    i++;

    if(i === text.length){
      clearInterval(typing);

      // Show Photos After Message
      setTimeout(()=>{

        photos.forEach(photo=>{
          let img = document.createElement("img");
          img.src = photo;
          container.appendChild(img);
        });

        let finalMsg = document.createElement("h3");
        finalMsg.innerHTML = "Nakul ‚ù§Ô∏è Shrutika Forever ‚ôæÔ∏è";
        container.appendChild(finalMsg);

      },1000);
    }

  },40);
};

</script>

<style>
@keyframes float{
  from {transform: translateY(0); opacity:1;}
  to {transform: translateY(-100vh); opacity:0;}
}
</style>
